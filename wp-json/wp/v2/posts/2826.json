{"id":2826,"date":"2023-02-02T18:00:52","date_gmt":"2023-02-02T18:00:52","guid":{"rendered":"https:\/\/ostif.org\/?p=2826"},"modified":"2023-02-02T16:19:56","modified_gmt":"2023-02-02T16:19:56","slug":"our-audit-of-kubernetes-event-driven-autoscaling-keda-is-complete","status":"publish","type":"post","link":"https:\/\/ostif.org\/our-audit-of-kubernetes-event-driven-autoscaling-keda-is-complete\/","title":{"rendered":"Our Audit of Kubernetes Event Driven Autoscaling (KEDA) is Complete!"},"content":{"rendered":"<p><span style=\"font-weight: 600;\">Results of the KEDA Security Engagement<\/span><\/p>\n<p><a href=\"https:\/\/keda.sh\/\"><span style=\"font-weight: 400;\">KEDA<\/span><\/a><span style=\"font-weight: 400;\">, or the Kubernetes-based Event Driven Autoscaling project, was reviewed by <\/span><a href=\"https:\/\/github.com\/trailofbits\/publications\"><span style=\"font-weight: 400;\">Trail of Bits<\/span><\/a><span style=\"font-weight: 400;\"> at the end of 2022. KEDA joins a <\/span><a href=\"https:\/\/www.cncf.io\/blog\/2022\/08\/08\/improving-cncf-security-posture-with-independent-security-audits\/\"><span style=\"font-weight: 400;\">growing list <\/span><\/a><span style=\"font-weight: 400;\">of CNCF Projects audited to improve security posture and help reach <\/span><a href=\"https:\/\/www.cncf.io\/projects\/\"><span style=\"font-weight: 400;\">graduated status<\/span><\/a><span style=\"font-weight: 400;\"> thanks to strategic partner OSTIF. A combination of threat modeling, manual code review and automated testing tools were used for this engagement.\u00a0<\/span><\/p>\n<p><span style=\"font-weight: 400;\">The audit uncovered one significant flaw in <\/span><i><span style=\"font-weight: 400;\">Redis Scalers<\/span><\/i><span style=\"font-weight: 400;\"> that could impact system confidentiality, integrity, and availability. The issue had to do with Cryptography and circumventing TLS, allowing for potential MitM attacks. An overview of the findings and security improvements can be found below:<\/span><\/p>\n<p><span style=\"font-weight: 500;\">Remediation Updates Based on Audit Findings<\/span><\/p>\n<ol>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><a href=\"https:\/\/github.com\/kedacore\/keda\/pull\/3966\"><span style=\"font-weight: 400;\">https:\/\/github.com\/kedacore\/keda\/pull\/3966<\/span><\/a><span style=\"font-weight: 400;\">.<\/span><\/li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><a href=\"https:\/\/github.com\/kedacore\/keda\/pull\/3989\"><span style=\"font-weight: 400;\">https:\/\/github.com\/kedacore\/keda\/pull\/3989<\/span><\/a><span style=\"font-weight: 400;\">.<\/span><\/li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><span style=\"font-weight: 400;\">Addressed via <\/span><a href=\"https:\/\/github.com\/kedacore\/keda\/pull\/4091\"><span style=\"font-weight: 400;\">https:\/\/github.com\/kedacore\/keda\/pull\/4091<\/span><\/a><span style=\"font-weight: 400;\">. This Prometheus server has been deprecated and will be removed entirely in 2 releases according to the project\u2019s <\/span><a href=\"https:\/\/github.com\/kedacore\/governance\/blob\/main\/DEPRECATIONS.md\"><span style=\"font-weight: 400;\">deprecation policy<\/span><\/a><span style=\"font-weight: 400;\"> in favor of operator&#8217;s Prometheus server (from operator-sdk).<\/span><\/li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><span style=\"font-weight: 400;\">\u00a0<\/span><a href=\"https:\/\/github.com\/kedacore\/keda\/pull\/3985\"><span style=\"font-weight: 400;\">https:\/\/github.com\/kedacore\/keda\/pull\/3985<\/span><\/a><span style=\"font-weight: 400;\">.<\/span><\/li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><span style=\"font-weight: 400;\">\u00a0<\/span><a href=\"https:\/\/github.com\/kedacore\/keda\/pull\/4007\"><span style=\"font-weight: 400;\">https:\/\/github.com\/kedacore\/keda\/pull\/4007<\/span><\/a><span style=\"font-weight: 400;\">.<\/span><\/li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><span style=\"font-weight: 400;\">\u00a0<\/span><a href=\"https:\/\/github.com\/kedacore\/keda\/pull\/4006\"><span style=\"font-weight: 400;\">https:\/\/github.com\/kedacore\/keda\/pull\/4006<\/span><\/a><span style=\"font-weight: 400;\">.<\/span><\/li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><span style=\"font-weight: 400;\">Remediated by first adding CodeQL with `security-and-quality` queries enabled and also fixing the reported issues: (1) <\/span><a href=\"https:\/\/github.com\/kedacore\/keda\/pull\/4133\"><span style=\"font-weight: 400;\">https:\/\/github.com\/kedacore\/keda\/pull\/4133<\/span><\/a> <span style=\"font-weight: 400;\">and (2) <\/span><a href=\"https:\/\/github.com\/kedacore\/keda\/pull\/4142\"><span style=\"font-weight: 400;\">https:\/\/github.com\/kedacore\/keda\/pull\/4142<\/span><\/a><span style=\"font-weight: 400;\">.<\/span><\/li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><span style=\"font-weight: 400;\">Remediated due to fixes implemented for Audit Finding #3.<\/span><\/li>\n<\/ol>\n<p><span style=\"font-weight: 500;\">Tooling Updates and Security Posture Improvements<\/span><\/p>\n<ol>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><span style=\"font-weight: 400;\">Introduced <\/span><a href=\"https:\/\/github.com\/kedacore\/keda\/issues\/3961\"><span style=\"font-weight: 400;\">semgrep as tool<\/span><\/a><span style=\"font-weight: 400;\"> (with GitHub integration) with all golang rules enabled + <\/span><a href=\"https:\/\/github.com\/dgryski\/semgrep-go\"><span style=\"font-weight: 400;\">https:\/\/github.com\/dgryski\/semgrep-go<\/span><\/a><span style=\"font-weight: 400;\"> rules, and also 2 custom rules, one for detecting the connection string (as proposed by audit team) and another one for detecting wrong error wrappings (to play around the tool and check how it works). A majority of the rules are in comment mode to detect them in PRs and suggest changes, and in parallel have been fixing all the alerts detected, as seen in <\/span><a href=\"https:\/\/github.com\/kedacore\/keda\/pull\/3998\"><span style=\"font-weight: 400;\">https:\/\/github.com\/kedacore\/keda\/pull\/3998<\/span><\/a><\/li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><span style=\"font-weight: 400;\">Another important security improvement is the cert management. TLS certificates have been introduced for for all KEDA communications (between the k8s API server and the metrics server, between the k8s API server and webhooks and between KEDA operator and KEDA metrics server) and for authenticate KEDA metrics server in KEDA operator gRCP server (the server exposes a TLS endpoint and requires TLS client authentication).<\/span><\/li>\n<\/ol>\n<p><span style=\"font-weight: 400;\">\u201cWith KEDA, we strive to provide a secure application autoscaling solution by using an extensive suite of security tools and offer our end-users various ways to authenticate to their dependencies and meet corporate requirements. Thanks to the audit we were able to patch some minor vulnerabilities and increase our existing security toolchain to prevent new vulnerabilities from being introduced.\u201d<\/span><\/p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><span style=\"font-weight: 400;\">Tom Kerkhove &#8211; KEDA Maintainer, Senior Software Engineer at Microsoft\u00a0<\/span><\/li>\n<\/ul>\n<p><span style=\"font-weight: 400;\">&#8220;We greatly appreciate OSTIF and Trail of Bits for their thorough security audit of KEDA and for the excellent cooperation we received. The KEDA community is constantly striving to make the project better and more secure for our users, the insights provided in the audit will help us achieve that.&#8221;<\/span><\/p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><span style=\"font-weight: 400;\">Zbynek Roubalik &#8211; KEDA Maintainer, Principal Software Engineer at Red Hat<\/span><\/li>\n<\/ul>\n<p><strong>Thank You<\/strong><\/p>\n<p><span style=\"font-weight: 400;\">We thank Jorge Turrado, Tom Kerkhove, Zbynek Roubalik, and all the KEDA maintainers for their help and collaboration on this engagement. <\/span><\/p>\n<p><span style=\"font-weight: 400;\">Special thanks to <\/span><a href=\"https:\/\/www.cncf.io\/\"><span style=\"font-weight: 400;\">Cloud Native Computing Foundation<\/span><\/a><span style=\"font-weight: 400;\"> for sponsoring the audit and entrusting OSTIF to get the work done. We are truly grateful for the opportunity to help make critical cloud computing infrastructure more secure and sustainable.<\/span><\/p>\n<p>The full research article by Trail of Bits is here: <a href=\"https:\/\/ostif.org\/wp-content\/uploads\/2023\/02\/2023-01-keda-securityreview.pdf\">https:\/\/ostif.org\/wp-content\/uploads\/2023\/02\/2023-01-keda-securityreview.pdf<\/a><\/p>\n","protected":false},"excerpt":{"rendered":"<p>Results of the KEDA Security Engagement KEDA, or the Kubernetes-based Event Driven Autoscaling project, was reviewed by Trail of Bits at the end of 2022. KEDA joins a growing list of CNCF Projects audited to improve security posture and help reach graduated status thanks to strategic partner OSTIF. A combination of threat modeling, manual code [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":2828,"comment_status":"closed","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":[],"categories":[69,60,89],"tags":[14,159,191,190,143],"_links":{"self":[{"href":"https:\/\/ostif.org\/wp-json\/wp\/v2\/posts\/2826"}],"collection":[{"href":"https:\/\/ostif.org\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/ostif.org\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/ostif.org\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/ostif.org\/wp-json\/wp\/v2\/comments?post=2826"}],"version-history":[{"count":4,"href":"https:\/\/ostif.org\/wp-json\/wp\/v2\/posts\/2826\/revisions"}],"predecessor-version":[{"id":2832,"href":"https:\/\/ostif.org\/wp-json\/wp\/v2\/posts\/2826\/revisions\/2832"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/ostif.org\/wp-json\/wp\/v2\/media\/2828"}],"wp:attachment":[{"href":"https:\/\/ostif.org\/wp-json\/wp\/v2\/media?parent=2826"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/ostif.org\/wp-json\/wp\/v2\/categories?post=2826"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/ostif.org\/wp-json\/wp\/v2\/tags?post=2826"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}